<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Advent Calendar - December 16, 2019">
    <meta name="author" content="Perl Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.55.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advent Calendar - December 16, 2019</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">
</head>

<body>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Advent Calendar - December 16, 2019</h2>
                    <div class="portfolio-meta">
                        <span>Saturday, Dec 14, 2019</span>|
                        <span> Tags:
                            Perl
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/2019-12-16.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    

<p><a href="/blog/advent-calendar-2019"><strong>Advent Calendar 2019</strong></a></p>

<hr />

<p>The gift is presented by <a href="/blog/meet-the-champion-017"><strong>Yozen Hernandez</strong></a>. Today he is talking about his solutions to <strong>Task #2: Vigenère Cipher</strong> of <a href="/blog/perl-weekly-challenge-015"><strong>&ldquo;The Weekly Challenge - 015&rdquo;</strong></a>.</p>

<h4 id="write-a-script-to-implement-vigenère-cipher-the-script-should-be-able-encode-and-decode-checkout-wiki-page-https-en-wikipedia-org-wiki-vigen-c3-a8re-cipher-for-more-information">Write a script to implement Vigenère cipher. The script should be able encode and decode. Checkout <a href="https://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher"><strong>wiki page</strong></a> for more information.</h4>

<hr />

<p>This seemed like a cool challenge to tackle. Knowing next to nothing about encryption, I was worried that this would take me all week. I actually spent less time on this challenge than I did on part 1!</p>

<p>The idea behind the <strong>Vigenère Cipher</strong> (which should probably be called the <strong>Bellaso Cipher</strong> as <strong>Giovan Battista Bellaso</strong> was the first one to describe it), is that a message is encrypted using a key and each letter in the key changes the <strong>“alphabet”</strong> of each letter of the message. The simplest form of such a cipher is the <strong>Caesar Cipher</strong>, where a message is <strong>“encrypted”</strong> (because it can hardly be called encryption by today’s standards) by picking a fixed shift length and then <strong>“rotating”</strong> the alphabet. Say you picked a left shift of <strong>10</strong>, then <strong>“A”</strong> would be represented by <strong>“Q”, “B”</strong> by <strong>“R”</strong>, and so on. The <strong>Vigenère Cipher</strong> uses a key to change the shift every letter.</p>

<p>Wikipedia’s example gives a message of <strong>“ATTACKATDAWN”</strong> and a key <strong>“LEMON”</strong>. The key is shorter than the message, so it will need to be repeated, cycling around as many times as needed to cover the message. Then, each corresponding letter in the key determines the alphabetic <strong>“shift”</strong> to <strong>encode</strong> the message. Since the key is needed to determine the shift of every letter, this cipher was long held as being <strong>“indecipherable”</strong> (though nothing lasts forever).</p>

<pre><code>Plaintext:  ATTACKATDAWN
Key:        LEMONLEMONLE
Ciphertext: LXFOPVEFRNHR
</code></pre>

<p>The first <strong>“L”</strong> in <strong>“LEMON”</strong> indicates a <strong>shift of 11</strong>, since <strong>“L”</strong> is eleven letters away from <strong>“A”</strong>. The <strong>“E”</strong> indicates a <strong>shift of 4</strong>, and so on. Looking at the <strong>“ciphertext”</strong> above, you might notice that <strong>“A”</strong>s always <strong>shift to the letter</strong> in the key, but this turns out not to be relevant to the solution, at least not my solution.</p>

<p>By now it becomes immediately obvious what must be done: using the numeric values for each letter in the alphabet, do some simple arithmetic to convert each letter in the message into a different letter determined by the numeric value of the key at a position. Since keys can be shorter than the message, you need to use modulo to wrap around the key when processing long messages.</p>

<p>Let’s look at the code to see what I mean:</p>

<pre><code class="language-perl">use v5.24;
use strict;
use warnings;
use feature qw(say state signatures);
no warnings &quot;experimental::signatures&quot;;
use Carp;

my %tabula;
@tabula{ &quot;A&quot; .. &quot;Z&quot; } = ( 0 .. 25 );

sub encode_vigenere {
    my %args = @_;
    croak &quot;Must supply the 'message' and 'key' arguments to this function.\n&quot;
        unless ( exists $args{message} &amp;&amp; exists $args{key} );

    my @message = split //, uc($args{message});
    my @key  = split //, uc($args{key});
    return join &quot;&quot;, map {
        ( &quot;A&quot; .. &quot;Z&quot; )
            [ ( $tabula{ $message[$_] } + $tabula{ $key[ $_ % @key ] } ) %
            keys %tabula ]
    } ( 0 .. @message - 1 );
}

sub decode_vigenere {
    my %args = @_;
    croak &quot;Must supply the 'message' and 'key' arguments to this function.\n&quot;
        unless ( exists $args{message} &amp;&amp; exists $args{key} );

    my @message = split //, uc($args{message});
    my @key  = split //, uc($args{key});
    return join &quot;&quot;, map {
        ( &quot;A&quot; .. &quot;Z&quot; )
            [ ( $tabula{ $message[$_] } - $tabula{ $key[ $_ % @key ] } ) %
            keys %tabula ]
    } ( 0 .. @message - 1 );
}

my $message = $ARGV[0] // &quot;ATTACKATDAWN&quot;;
my $key  = $ARGV[1] // &quot;LEMON&quot;;

# Encrypt
my $encrypted = encode_vigenere( message =&gt; $message, key =&gt; $key );
say &quot;Encrypted: $encrypted&quot;;

# Decrypt
my $decoded = decode_vigenere( message =&gt; $encrypted, key =&gt; $key );
say &quot;Decrypted: $decoded&quot;;
</code></pre>

<p>I built a hash which mapped uppercase <strong>Latin letters</strong> to a numeric equivalent, and called that <strong>%tabula</strong> after the term <strong>tabula recta</strong> used by the people actually using this cipher. Now I’ve got a mapping between letters and numbers which matches the actual mapping used.</p>

<p>Next each function takes it’s <strong>input</strong>, <strong>a message</strong> and <strong>a key</strong>, and splits each of these into arrays so we can iterate over them. A loop iterates over the message, and for each letter in the message we subtract (in the case of encryption) the value of the corresponding letter in the key. Again, since the key is usually shorter, we must use <strong>modulo arithmetic</strong> dependent on the length of the key to let us wrap around and reuse letters in the key. The new <strong>“shifted”</strong> value is used as an index into a list of uppercase letters from <strong>“A”-“Z”</strong>, same as when we built the <strong>tabula</strong>. Another <strong>modulo</strong> is used, with the <strong>length of the alphabet</strong> (the keys in the tabula) as the <strong>divisor</strong>, to make sure the the result of the shift is a valid index. This works even for <strong>negative shift values</strong>.</p>

<p><strong>Decryption</strong> works much the same, except that instead of subtracting the value obtained from the key, we add it. Knowing that, we could make the code even simpler, at the risk of making the interface a bit clunkier:</p>

<pre><code class="language-perl">sub vigenere (%args) {
    croak &quot;Must supply the 'message' and 'key' arguments to this function.\n&quot;
        unless ( exists $args{message} &amp;&amp; exists $args{key} );

    my @message = split //, uc($args{message});
    my @key  = split //, uc($args{key});
    my $decode = ( exists $args{decode} &amp;&amp; $args{decode} != 0 ) || -1;
    return join &quot;&quot;, map {
        ( &quot;A&quot; .. &quot;Z&quot; )[
            ( $tabula{ $message[$_] }
                    + ( ( -1 * $decode ) * $tabula{ $key[ $_ % @key ] } ) ) %
            keys %tabula
        ]
    } ( 0 .. @message - 1 );
}

my $message = $ARGV[0] // &quot;ATTACKATDAWN&quot;;
my $key  = $ARGV[1] // &quot;LEMON&quot;;

# Encrypt
my $encrypted = vigenere( message =&gt; $message, key =&gt; $key );
say &quot;Encrypted: $encrypted&quot;;

# Decrypt
my $decoded = vigenere( message =&gt; $encrypted, key =&gt; $key, decode =&gt; 1 );
say &quot;Decrypted: $decoded&quot;;
</code></pre>

<p>Supply any <strong>non-0</strong> value to the <strong>decode option</strong> in the <strong>vigenere function</strong> to <strong>decode</strong> rather than <strong>encode</strong>. I think I would be happy with that, and we could always add wrapper functions to hide that away from the user and still cut down on code repetition:</p>

<pre><code class="language-perl">sub encode_vigenere {
    my %args = @_;
    vigenere(%args, decode =&gt; 0);
}

sub decode_vigenere {
    my %args = @_;
    vigenere(%args, decode =&gt; 1);
}
</code></pre>

<p>Now, even if the user supplies some other value for decode, as long as they use the correct wrapper function, they will get the result they wanted.</p>

<p>See the full solution, <a href="https://github.com/manwar/perlweeklychallenge-club/tree/master/challenge-015/yozen-hernandez/perl5/ch-2.pl"><strong>here</strong></a>.</p>

<hr />

<p>If you have any suggestion then please do share with us <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>

<p><a href="/blog/advent-calendar-2019"><strong>Advent Calendar 2019</strong></a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        <script>document.write(new Date().getFullYear())</script>
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

