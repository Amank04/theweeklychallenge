<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Laurent Rosenfeld Weekly Review: Challenge - #003.">
    <meta name="author" content="Perl Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.66.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Laurent Rosenfeld Weekly Review: Challenge - 003</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">
</head>

<body>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Laurent Rosenfeld Weekly Review: Challenge - 003</h2>
                    <div class="portfolio-meta">
                        <span>Sunday, Oct 27, 2019</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/p6-review-challenge-003.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="task-1-five-smooth-numbers">Task #1: Five-Smooth Numbers</h2>
<p>This is derived in part from my <a href="http://blogs.perl.org/users/laurent_r/2019/04/perl-weekly-challenge-week-3.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-003/">Week 03 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>
<p>The challenge reads as follows:</p>
<p><em>Create a script to generate 5-smooth numbers, whose prime divisors are less or equal to 5. They are also called Hamming/Regular/Ugly numbers. For more information, please check this <a href="https://en.wikipedia.org/wiki/Regular_number">wikipedia</a> page.</em></p>
<p>Regular or 5-smooth numbers (or Hamming numbers, or ugly numbers) are numbers whose prime divisors are only 2, 3, and 5, so that they evenly divide some powers of 30.</p>
<h2 id="my-solutions">My Solutions</h2>
<p>Generating just some 5-smooth numbers is a trivial problem. For example, if you want 6 such numbers, you only need to generate the first six powers of 2 (or the first six powers of 3, or six powers of 5), as in this Perl 6 one-liner:</p>
<pre><code>$ perl6 -e 'say 2 ** $_ for 1..6;'
2
4
8
16
32
64
</code></pre>
<p>This is really too simple, so my guess is that, perhaps, what is wanted is maybe something like: generate a sequence of all 5-smooth numbers smaller than a given upper bound (say 100). Such a sequence is sometimes called a Hamming sequence. Or maybe that&rsquo;s not really the requirement, but let&rsquo;s do it for the fun of it.</p>
<p>We could do it with a brute-force approach: check all integers between 1 and 100, perform a prime factor decomposition of each of them and check whether any of the prime factors is larger than 5. This would be rather inefficient, though, with a lot of useless computations. An alternative would be to generate a list of primes between 1 and the upper bound  and to check for each number in the range whether it can be evenly divided by any of the primes larger than 5. In either case, we need to build a list of prime numbers.</p>
<p>Perl 6 has a built-in <code>is-prime</code> subroutine, which implements the very fast Miller-Rabin algorithm for figuring out whether an integer is prime. The <code>is-prime</code> subroutine returns <code>False</code> if this integer is not a prime, and it returns <code>True</code> if the integer is a known prime or if it is very likely to be a prime based on the probabilistic Miller-Rabin test. OK, the Miller-Rabin test is probabilistic and it is possible (though very unlikely) that <code>is-prime</code> will return <code>True</code> for a number that is not prime. In fact, the probability of occurrence of such an event is so low that it is said to be much less likely to happen than having a cosmic ray hitting your CPU at the wrong moment and disrupting its function to the point of giving you the wrong answer. We don&rsquo;t have to worry about this probabilistic test anyhow, since we&rsquo;re dealing with small numbers for which the <code>is-prime</code> subroutine is known to return a correct result.</p>
<p>So building the list of primes between 1 and 100 is just one line of code, shown here in the REPL:</p>
<pre><code>&gt; my @primes = grep {.is-prime}, 1..100
[2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97]
</code></pre>
<p>We don&rsquo;t even need to specify how many primes we want in our list: we can build a <em>lazy infinite</em> list of prime numbers:</p>
<pre><code>&gt; my $primes := grep {.is-prime}, $list;
(...)
&gt; say $primes[4];   # Fifth prime number
11
&gt; say $primes[999]; # Thousandth prime number
7919
</code></pre>
<p>Here, <code>$primes</code> is an infinite list or prime numbers. Quite obviously, the computer did not calculate and populate an infinite list of primes. It is a <em>lazy</em> list, which means that the program now knows how to calculate any element of the list, but it will actually do so only when required. This is great because we don&rsquo;t need to know in advance how many primes we really need: we just prepare a lazy infinite list, and the program will compute only the primes that are actually needed by the program.</p>
<h4 id="building-the-hamming-sequence">Building the Hamming Sequence</h4>
<p>Now, it is easy to go through all the integers between 1 and 100 and find out if they can be divided evenly by any of the primes larger than 5:</p>
<pre><code class="language-Perl6" data-lang="Perl6">my @prime_numbers = grep {.is-prime}, 5^..Inf;    # we need only primes strictly larger than 5
my @regulars;
for (1 .. 100) -&gt; $num {
    my $is_regular = True;
    for @prime_numbers -&gt; $prime {
        last if $prime &gt; $num / 2;
        if ( $num %% $prime ) {
            $is_regular = False;
            last;
        }
    }
    push @regulars, $num if $is_regular;
}
say @regulars;
</code></pre><p>This will print the following Hamming:</p>
<pre><code>[1 2 3 4 5 6 8 9 10 12 15 16 18 20 24 25 27 30 32 36 40 45 48 50 54 60 64 72 75 80 81 90 96 100]
</code></pre>
<h4 id="producing-directly-the-products-of-the-powers-of-2-3-and-5">Producing Directly the Products of the Powers of 2, 3, and 5</h4>
<p>We can use the Perl 6 cross (<code>X</code>) metaoperator to generate all the products. I knew intuitively that this could certainly be done, but I must admit it took a little bit of thinking to figure out a good way to implement it.</p>
<p>The cross operator operates on two or more lists and generates a Cartesian product of all elements. Here is an example in the REPL:</p>
<pre><code>&gt; say &lt;a b c&gt; X &lt;1 2 3&gt;;
((a 1) (a 2) (a 3) (b 1) (b 2) (b 3) (c 1) (c 2) (c 3))
</code></pre>
<p>Used as a metaoperator, <code>X</code> will apply the associated operator to all the generated tuples. For, example, we can use it with the concatenation operator (<code>X~</code>) to generate strings from the tuples:</p>
<pre><code>&gt; say &lt;a b c&gt; X~ &lt;1 2&gt; X~ &lt;y z&gt;;
(a1y a1z a2y a2z b1y b1z b2y b2z c1y c1z c2y c2z)
</code></pre>
<p>We can use the cross metaoperator together with the multiplication operator (<code>X*</code>) to generate the products of the various powers of 2, 3 and 5:</p>
<pre><code class="language-Perl6" data-lang="Perl6">my %powers;
for 2, 3, 5 -&gt; $n {%powers{$n} = (1, $n, $n**2 ... *);}
my @hamming_sequence = sort grep { $_ &lt;= 100},
    (%powers{2}[0..6] X* %powers{3}[0..4] X* %powers{5}[0..2]);
</code></pre><p>First, we use the sequence (<code>...</code>) to generate three lazy infinite lists of the powers of 2, 3 and 5 (stored in the <code>%powers</code> hash), and, then, we use <code>X*</code> to generate a lazy infinite list of all the products, and finally apply a <code>grep</code> to keep only the 5-smooth numbers smaller than 100 and sort the result.</p>
<p>We obtain the same Hamming sequence as before.</p>
<h2 id="alternative-solutions">Alternative Solutions</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/arne-sommer/perl6/ch-1.p6">Arne Sommmer</a> used three nested <code>for</code> loops going from zero to infinity to produce 5-smooth numbers and leaving each loop when reaching the <code>$limit</code> passed as a parameter to the program:</p>
<pre><code class="language-Perl6" data-lang="Perl6">sub MAIN (Int $limit where $limit &gt; 0)
{
  my SetHash $solution = SetHash;

  for 0 .. Inf -&gt; $c
  {
    last if 5 ** $c &gt; $limit;

    for 0 .. Inf -&gt; $b
    {
      last if 3 ** $b &gt; $limit;

      for 0 .. Inf -&gt; $a
      {
         my $value = 2 ** $a * 3 ** $b * 5 ** $c;
         last if $value &gt; $limit;
         $solution{$value} = True;
      }
    }
  }
  say $solution.keys.sort.join(&quot; &quot;);
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/mark-senn/perl6/ch-1.p6">Mark Senn</a> similarly used nested <code>for</code> loops:</p>
<pre><code>my $m = 2;

# Construct the result.
my @r = ();
# No need to get fancy---nested loops
# will produce only the numbers needed.
for (1..$m) -&gt; $i  {
    for (1..$m) -&gt; $j  {
        for (1..$m) -&gt; $k  {
            @r.push(2**$i * 3**$j * 5**$k);
        }
    }
}
# Print the result.
@r.sort.join(&quot;\n&quot;).say;
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/doug-schrag/perl6/ch-1.p6">Doug Schrag</a> used the <code>Z</code> infix zip operator and the <code>XZ+</code> metaoperator to produce the following solution:</p>
<pre><code class="language-Perl6" data-lang="Perl6">sub MAIN(Int :$limit = 9) {
    # Use Slip() to flatten the list just one level
    my @exponents-list = (^$limit).produce(&amp;grow)
        .map({ Slip( $_ ?? $_ !! () ) });
    # 3D coordinates used as powers of the allowable
    # prime factors
    for @exponents-list {
        # @() is used to indicate multiple element in the
        # argument list to the Z operator (also below)
        say [*] (2, 3, 5) Z** @($_)
    }
}

multi sub grow (Int, Int) { ((0, 0, 0),) }
multi sub grow (List $a, Int $b --&gt; List()) {
    # Sequence of integral points in 3D space where sum
    # of coordinates is the next integer (0, 1, 2 ...)
    ( @($a) XZ+ (1, 0, 0), (0, 1, 0), (0, 0, 1) )
        .map(*.List).unique(:with(&amp;[eqv]));
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/fjwhittle/perl6/ch-1.p6">Francis J. Whittle</a> used a <code>gather/take</code> block to build some iterators generating lists, and promises to allow for concurrent programming. A quite interesting implementation, which may look a bit complicated, but runs very fast even for finding large Hamming numbers:</p>
<pre><code class="language-Perl6" data-lang="Perl6">subset Count of Int where * &gt;= 0;

#| Script to generate 5-smooth numbers
unit sub MAIN(
  Count :n(:$count) = 20, #= How many 5-smooth numbers to generate.
  Bool :$timing = False, #= Display timing information with output.
  *@print #= Specific indices to show.
);

# Use a lazy list to generate 5-smooth numbers
my $smooth5 = gather {
  # Initialize some iterators.
  my ($i2, $i3, $i5) := ($smooth5.iterator for ^3);
  my ($n2, $n3, $n5) := 1 xx 3;

  # Just keep generating.  Does the list become sparse?  I don't know!
  loop {
    # Minimum of the latest iterations
    take my $n := ($n2, $n3, $n5).min;

    # Advance the iterators that matched.
    $n2 == $n and $n2 := $i2.pull-one * 2;
    $n3 == $n and $n3 := $i3.pull-one * 3;
    $n5 == $n and $n5 := $i5.pull-one * 5;
  }
}

if $timing {
  # This needs to be a discrete block.
  {
    Promise.in(1 / 100).then: &amp;?BLOCK;
    $*ERR.printf(Q:b'\r%6.2fs', (now - INIT now));
  }
}

$smooth5.[^$count].say if $count;

for @print.grep(* ~~ Int).sort -&gt; $n {
  if $timing {
    my $result = $smooth5[$n-1];
    (Q:b'\r%6.2fs %*d: %d').sprintf((now - INIT now), @print.max.chars, $n, $result).say;
  } else {
    sprintf('%*d: %d', @print.max.chars, $n, $smooth5[$n-1]).say;
  }
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/jaldhar-h-vyas/perl6/ch-1.p6">Jaldhar H. Vyas</a> used in input list of consecutive integers  and looked for numbers divisible by numbers other than 2, 3 and 5:</p>
<pre><code class="language-Perl6" data-lang="Perl6">sub isSmooth(Int $num) {
    # get the divisors that _aren't_ multiples of 2, 3, or 5
    my @divisors = (1 .. $num)
                   .grep( { $num % $_ == 0 } )
                   .grep( { ($_ % 2 != 0) &amp;&amp; ($_ % 3 != 0) &amp;&amp; ($_% 5 != 0) } );

    # 1 is always a divisor so the array will always have atleast one member.
    return @divisors.elems == 1;
}

multi sub MAIN(
    Int $max #= search for 5-smooth numbers in the range 1 .. max
    ) {
    (1 .. $max).grep(&amp;isSmooth).join(' ').say;
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/james-smith/perl6/ch-1.p6">James Smith</a> used a <code>lazy gather/take</code> block:</p>
<pre><code class="language-Perl6" data-lang="Perl6">my @hammings = lazy gather {
  take 1;
  my $last = 0;
  while 1 {
    my $lowest;
    my $n = 5; my @other = (3,2);
    for (@hammings) {
      next if $_*$n &lt;= $last;
      $lowest = $_*$n unless $lowest &amp;&amp; $lowest &lt; $_*$n;
      last unless @other;
      $n = shift @other;
      redo;
    }
    take $lowest;
    $last = $lowest;
  }
}

sub MAIN($n) {
  say @hammings[$_-1] for 1..$n;
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/joelle-maslak/perl6/ch-1.p6">Joelle Maslak</a> used a <code>divisors</code> subroutine to find the divisors of an integer:</p>
<pre><code class="language-Perl6" data-lang="Perl6">sub divisors(Int:D $i --&gt;Array[Int:D]) {
    if ($i == 0) { return 0; }

    my $sqrt = sqrt($i).Int;

    my Int:D @divs = grep { $i %% $^div }, 1..$sqrt;
    @divs.append: map { Int($i / $^div) }, @divs;

    return @divs;
}
</code></pre><p>and then used it to filter the <code>@hamming</code> array of numbers:</p>
<pre><code>sub MAIN(Int:D $count where * ≥ 0) {
    my @hamming = (1..∞).grep: { divisors($^num).grep( *.is-prime ).Set ⊆ (2,3,5).Set };
    say &quot;Hamming numbers [0..{$count-1}]: &quot; ~ @hamming[^$count].join(&quot;, &quot;);
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/nick-logan/perl6/ch-1.p6">Nick Logan</a> wrote a &ldquo;polyglot&rdquo; solution, i.e. voluntarily departed from usual best practices in order to provide a solution that would run on both Perl 5 and Perl 6:</p>
<pre><code class="language-Perl6" data-lang="Perl6">my @ARGV = do { sub eval { &amp;EVAL(@_) }; eval( (&quot;0&quot; and q|@*ARGS| or q|@ARGV|) ) };

my $numbers_tried = 0;
my $numbers_found = 0;

NUMBERS: while ($numbers_found != @ARGV[0]) {

    $numbers_tried++;
    my $state = $numbers_tried;
    while ($state != 1) {
        if ($state % 2 == 0) {
            $state /= 2;
        }
        elsif ($state % 3 == 0) {
            $state /= 3;
        }
        elsif ($state % 5 == 0) {
            $state /= 5;
        }
        else {
            next NUMBERS;
        }
    }
    $numbers_found++;

    print(&quot;$numbers_tried\n&quot;);
}
</code></pre><p>Really not an idiomatic Perl 6 solution, but a quite interesting exercise that should give some food for thought to those who claim against all evidence that P5 and P6 are totally different languages. No, P5 and P6 are indeed different languages, but they are very similar in many respects, especially in spirit.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/ohmycloud/perl6/ch-2.p6">Ohmy Cloud</a> wrote a solution with three <code>while</code> loops:</p>
<pre><code class="language-Perl6" data-lang="Perl6">sub ugly-number(Int $index) {
    return 0 if $index == 0;
    my @baselist = [1];
    my ($min2, $min3, $min5) = 0,0,0;
    my $curnum = 1;

    while $curnum &lt; $index {
        my $minnum = (@baselist[$min2] * 2,  @baselist[$min3] * 3,  @baselist[$min5] * 5).min;
        @baselist.append($minnum);

        while @baselist[$min2] * 2 &lt;= $minnum { $min2 += 1 }
        while @baselist[$min3] * 3 &lt;= $minnum { $min3 += 1 }
        while @baselist[$min5] * 5 &lt;= $minnum { $min5 += 1 }

        $curnum +=1
     }

    return @baselist[*-1]
}

sub MAIN(Int $count) {
    ugly-number($_).say for 1..$count;
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/rob4t/perl6/ch-1.p6">rob4t</a> wrote a <code>get-hamming-sequence</code> and a <code>is-hamming-number</code> subroutines to find Hamming numbers. His filtering subroutine looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl" data-lang="Perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is</span>-hamming-number(PositiveInt $number is copy --&gt; Bool) {
    <span style="color:#66d9ef">return</span> True <span style="color:#66d9ef">if</span> $number <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>;

    <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">5</span> <span style="color:#f92672">-&gt;</span> $divisor {
        <span style="color:#66d9ef">return</span> is<span style="color:#f92672">-</span>hamming<span style="color:#f92672">-</span>number($number div $divisor) <span style="color:#66d9ef">if</span> $number %% <span style="color:#960050;background-color:#1e0010">$</span>divisor;
    }
    <span style="color:#66d9ef">return</span> False;
};
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/ruben-westerberg/perl6/ch-1.p6">Ruben Westerberg</a> suggested this solution based on the powers of 60:</p>
<pre><code class="language-Perl6" data-lang="Perl6">my $powers=(1 ... *) ;
my $primes=(2,3,5);
for $powers&lt;&gt; {
    my $smooth=[];
    my $t=60**$_;
        for 1..($t/2) -&gt; $s {
            append $smooth,
                ((do for $primes&lt;&gt; -&gt; $p {
                    my $smooth1=$s*$p;
                    my $val=Int($t/$smooth1);
                    my $test= ($t%%($smooth1));
                    ($test &amp;&amp; ($val &gt;= 2)) ?? ($smooth1,$val) !! ();
                    }).flat);
    }
    say &quot;5-Smooth Numbers for 60^$_: &quot;;
    say $smooth.Bag.pairs&gt;&gt;.key.sort.join: &quot; &quot;;
    say &quot;&quot;;
    sleep 1;
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-003/simon-proctor/perl6/ch-1.p6">Simon Proctor</a> used a <code>lazy gather/take</code> block and <code>push</code> statements to build the resulting list. His program finally sorts the output values and removes duplicates:</p>
<pre><code class="language-Perl6" data-lang="Perl6">sub MAIN(Int() $count) {
    my @h = lazy gather {
        my @items = (1);
        loop {
            my $val = @items.shift;
            take $val;
            @items.push($val*2,$val*3,$val*5);
            @items = @items.unique.sort( { $^a &lt;=&gt; $^b } );
        }
    };
    say @h[0..$count-1]
}
</code></pre><p>I initially wondered, though, why Simon does the chained <code>.unique.sort</code> method invocation within the loop rather than after having completed the loop, but there is a good reason for that: it is (quite obviously) not possible to sort a lazy list.</p>
<h2 id="see-also">SEE ALSO</h2>
<p>Four blog posts on this subject:</p>
<ul>
<li>
<p>Arno Sommer: <a href="https://perl6.eu/regular-pascal.html;">https://perl6.eu/regular-pascal.html;</a></p>
</li>
<li>
<p>Francis J. Whittle: <a href="https://rage.powered.ninja/2019/04/12/hamming-it-up-in-perl-6-weekly.html;">https://rage.powered.ninja/2019/04/12/hamming-it-up-in-perl-6-weekly.html;</a></p>
</li>
<li>
<p>Mark Senn: <a href="https://engineering.purdue.edu/~mark/perl-weekly-challenge/003/t.pdf;">https://engineering.purdue.edu/~mark/perl-weekly-challenge/003/t.pdf;</a></p>
</li>
<li>
<p>Simon Proctor: <a href="http://www.khanate.co.uk/blog/2019/04/09/perl-weekly-week-3/">http://www.khanate.co.uk/blog/2019/04/09/perl-weekly-week-3/</a>.</p>
</li>
</ul>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Please let me know if I forgot any of the challengers or if you think my explanation of your code misses something important (send me an e-mail or just raise an issue against this GitHub page).</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        <script>document.write(new Date().getFullYear())</script>
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

