<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Laurent Rosenfeld Weekly Review: Challenge - #017.">
    <meta name="author" content="Perl Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.66.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Laurent Rosenfeld Weekly Review: Challenge - 017</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">
</head>

<body>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Laurent Rosenfeld Weekly Review: Challenge - 017</h2>
                    <div class="portfolio-meta">
                        <span>Wednesday, Oct 9, 2019</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/p6-review-challenge-017.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="task-1-parsing-urls-with-a-perl-6-grammar">Task #1: Parsing URLs With a Perl 6 Grammar</h2>
<p>This is derived from my <a href="http://blogs.perl.org/users/laurent_r/2019/07/-perl-weekly-challenge.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-017/">Week 17 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>
<p>The challenge reads as follows:</p>
<p><em>Create a script to parse URL and print the components of URL. According to Wiki page, the URL syntax is as below:</em></p>
<pre><code>scheme:[//[userinfo@]host[:port]]path[?query][#fragment]
</code></pre>
<p><em>For example: jdbc:mysql://user:password@localhost:3306/pwc?profile=true#h1</em></p>
<pre><code>scheme:   jdbc:mysql
userinfo: user:password
host:     localhost
port:     3306
path:     /pwc
query:    profile=true
fragment: h1
</code></pre>
<h2 id="my-solution">My Solution</h2>
<p>It is quite possible to use regexes to solve this challenge (and that&rsquo;s what I did for my solution in Perl 5), but, in my humble opinion, the right way to parse a URL is of course to write a grammar, and this is great fun in Perl 6.</p>
<p>I can&rsquo;t explain  in detail how this works (as this would take many pages), but let me try to give an idea. First, we define a grammar, with a number of rules, regexes, or tokens. When we use a grammar with the <code>parse</code> method on a string, the parse method calls by default the TOP rule (or token) and tries to match this rule:</p>
<pre><code>rule TOP {
    &lt;scheme&gt; '//' &lt;authority&gt;? &lt;path&gt; [ '?' &lt;query&gt; ]? &lt;fragment&gt;?
}
</code></pre>
<p>This rules looks for a <code>&lt;scheme&gt;</code> component, followed by <code>//</code>, followed by an optional <code>&lt;authority&gt;</code> component, followed by a <code>&lt;path&gt;</code>component, etc. A <code>&lt;scheme&gt;</code> component is defined by the <code>scheme</code> token:</p>
<pre><code>token scheme { \w+ [ ':' \w+]? ':'}
</code></pre>
<p>which is composed of a group of alphanumerical characters, followed by an optional colon and another group of alphanumerical characters, and ending with a colon.</p>
<p>Similarly, the optional <code>&lt;authority&gt;</code> component, if it exists, is defined by the <code>authority</code> token:</p>
<pre><code>token authority { [&lt;userinfo&gt; '@']? &lt;host&gt; [':' &lt;port&gt;]? }
</code></pre>
<p>An <code>authority</code> component is itself composed of an optional <code>&lt;userinfo&gt;</code>and <code>@</code>, followed by a <code>&lt;host&gt;</code>, followed by an optional colon and a <code>&lt;port&gt;</code>. As you probably guessed by now, these three sub-components will be defined in other tokens, and so on.</p>
<p>In the end, if the string is successfully parsed, the result is stored into the <code>$/</code> match object. We can then lookup for the various components with a hash-like syntax on the match object. So for example, the <code>&lt;scheme&gt;</code> component can be found in <code>$/&lt;scheme&gt;</code> or, in the code below, in <code>$match&lt;scheme&gt;</code>, since I assigned the parse result (the match object) to the <code>$match</code> variable.</p>
<p>Now the full code of the program:</p>
<pre><code class="language-Perl6" data-lang="Perl6">use v6;
# use Grammar::Tracer;

grammar URL {
    rule TOP {
        &lt;scheme&gt; '//' &lt;authority&gt;? &lt;path&gt; [ '?' &lt;query&gt; ]? &lt;fragment&gt;?
    }
    token scheme { \w+ [ ':' \w+]? ':'}
    token authority { [&lt;userinfo&gt; '@']? &lt;host&gt; [':' &lt;port&gt;]? }
    token userinfo { &lt;user&gt; [':' &lt;password&gt; ]?}
    token user { \w+ }
    token password { &lt;-[ @ ]&gt;+ }
    token host {
        || &lt;hostname&gt;
        || &lt;ipv4&gt;
        || &lt;ipv6&gt;
    }
    token hostname { \w+ [ '.' \w+ ]* }
    token ipv4 { &lt;octet&gt; ['.' &lt;octet&gt; ] ** 3 }
    token octet { (\d ** 1..3) &lt;?{0 &lt;= $0 &lt;= 255 }&gt;}
    token ipv6 { '[' &lt;group&gt; ** 8 ']' }
    token group { &lt;xdigit&gt; ** 4 }
    token port { \d+ }
    token path { '/' &lt;segment&gt;? [ '/' &lt;segment&gt; ]* }
    token segment { \w+ [ '::' \w+ ]? }
    token query {  \w+ '=' &lt;[\w\s]&gt;+ }
    token fragment { '#' &lt;frag_id&gt; }
    token frag_id { \w+ }
}
sub display (Str $label, Str $value) {
    printf &quot;    %-15s:\t %-20s\n&quot;, $label, $value;
}

for ('jdbc:mysql://user:password@localhost:3306/pwc?profile=true#h1',
     'https://en.wikipedia.org/wiki/URL',
     'https://perlcon.eu/my',
     'https://www.perlmonks.org/?node=Seekers of Perl Wisdom',
     'https://metacpan.org/pod/Test::More'
    ) -&gt; $url-string {
    my $match = URL.parse($url-string);
    if $match {
        say &quot;Matched $url-string:&quot;;
        display &quot;scheme&quot;, ~$match&lt;scheme&gt;;
        display &quot;userinfo&quot;, ~$match&lt;authority&gt;&lt;userinfo&gt;
            if defined $match&lt;authority&gt;&lt;userinfo&gt;;
        display &quot;host&quot;, ~$match&lt;authority&gt;&lt;host&gt;
            if defined $match&lt;authority&gt;&lt;host&gt;;
        display &quot;port&quot;, ~$match&lt;authority&gt;&lt;port&gt;
            if defined $match&lt;authority&gt;&lt;port&gt;;
        display &quot;path&quot;, ~$match&lt;path&gt;;
        display &quot;query&quot;, ~$match&lt;query&gt; if defined $match&lt;query&gt;;
        display &quot;fragment&quot;, ~$match&lt;fragment&gt; if defined $match&lt;fragment&gt;;
    } else {
        say &quot;Not matched $url-string&quot;;
    }
}
</code></pre><p>And this is the output with our five test URLs:</p>
<pre><code>$ perl6  parse_url.p6
Matched jdbc:mysql://user:password@localhost:3306/pwc?profile=true#h1:
    scheme         :         jdbc:mysql:
    userinfo       :         user:password
    host           :         localhost
    port           :         3306
    path           :         /pwc
    query          :         profile=true
    fragment       :         #h1
Matched https://en.wikipedia.org/wiki/URL:
    scheme         :         https:
    host           :         en.wikipedia.org
    path           :         /wiki/URL
Matched https://perlcon.eu/my:
    scheme         :         https:
    host           :         perlcon.eu
    path           :         /my
Matched https://www.perlmonks.org/?node=Seekers of Perl Wisdom:
    scheme         :         https:
    host           :         www.perlmonks.org
    path           :         /
    query          :         node=Seekers of Perl Wisdom
Matched https://metacpan.org/pod/Test::More:
    scheme         :         https:
    host           :         metacpan.org
    path           :         /pod/Test::More
</code></pre>
<p>Undoubtedly, many more tests would be needed, as URLs can take many forms and we tested only a few cases.</p>
<h2 id="alternative-solutions">Alternative Solutions</h2>
<p>Since most solutions used regexes or grammars to perform the bulk of the work, it seems interesting to quote these grammars (except when they are too long) to provide a ground for comparisons.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/arne-sommer/perl6/ch-2.p6">Arne Sommer</a> used a regex to parse URLs:</p>
<pre><code class="language-Perl6" data-lang="Perl6">if $url ~~
  /^
    (&lt;[a..z]&gt;&lt;[a..z 0..9 + . : \-]&gt;*)\: # $0 scheme
    [\/\/                               # //
      [(.*[\:.+]?)\@]?                  # $1 userinfo (optional)
      (&lt;[\w \. \-]&gt;*)                   # $2 host
      [\:(\d+)]?                        # $3 port (optional)
      (\/?)                             # $4 path separator
    ]?                                  # $1-$4 are optional
    ([&lt;[\w \d -] - [#?]&gt;]+)?            # $5 path (optional)
    [\?(&lt;[\w \d \- =]&gt;*)]?              # $6 query (optional)
    [\#(.*)]?                           # $7 fragment (optional)
  $/
{ # ...
</code></pre><p>Note that I almost missed that Arne also wrote a <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/arne-sommer/perl6/url-parse-grammar">grammar-based solution</a>.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/noud/perl6/ch-2.p6">Noud</a> also used a regex to parse the input. I can&rsquo;t resist showing his very compact <code>parse</code> subroutine:</p>
<pre><code class="language-Perl6" data-lang="Perl6">sub parse($url) {
    my @keys = &lt;scheme userinfo host port path query fragment&gt;;
    my $reg = / (\w+\:\w+)\:\/\/(\w+\:.+)\@(\w+)\:(\d+)(\/\w+)\?(.+)\#(\w+)$ /;

    return Hash.new(@keys Z ($url ~~ $reg).values);
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/fjwhittle/perl6/ch-2.p6">Francis J. Whittle</a> created a full-fledged OOP program with three classes: <code>URL</code>, <code>URL::UserInfo</code>, and <code>A::URLish</code>.  Parsing itself is done with the <code>G::URLish</code> grammar:</p>
<pre><code class="language-Perl6" data-lang="Perl6">grammar G::URLish {
  regex TOP {
    ^ &lt;scheme&gt; &lt; : :// &gt;
    &lt;userinfo&gt;?
    [ &lt;host&gt; [ ':' &lt;port&gt; ]? '/' ]?
    &lt;path&gt;
    [ '?' &lt;query&gt; ]?
    [ '#' &lt;fragment&gt; ] ? $
  }
  proto regex userinfo      { * }
  regex userinfo:sym&lt;user-pass&gt; { &lt;user&gt; [ ':' &lt;password&gt; ]? '@'                             }
  regex user            { &lt;.xpalpha&gt;+                                                }
  regex password        { &lt;.xpalpha&gt;+                                                }
  regex host            { &lt;.xpalpha&gt;+                                                }
  token port            { &lt;.digit&gt;+                                                  }
  # For compatibility with the example, but I don't think : is valid here.
  regex scheme          { &lt;.ialpha&gt;+ [ ':' &lt;.ialpha&gt;+ ]?                             }
  regex path            { [ &lt;.xpalpha&gt;* ]+ % '/'                                     }
  regex query           { &lt;param&gt;+ % &lt;[\&amp;;]&gt;                                         }
  regex param           { $&lt;key&gt; = [ &lt;.xalpha&gt;+ ] [ '=' $&lt;value&gt; = [ &lt;.xalpha&gt;+ ] ]? }
  token fragment        { &lt;.xalpha&gt;+                                                 }
  token xalpha          { &lt;.alpha&gt; | &lt;.digit&gt; | &lt;.safe&gt; | &lt;.extra&gt; | &lt;.escape&gt;       }
  token xpalpha         { &lt;.xalpha&gt; | '+'                                            }
  token ialpha          { &lt;.alpha&gt; [ &lt;.xalpha&gt;+ ]                                    }
  token alpha           { &lt;[a..z A..Z]&gt;                                              }
  token digit           { &lt;[0..9]&gt;                                                   }
  token safe            { &lt;[$ \- _ @ . &amp;]&gt;                                           }
  token extra           { &lt;[! * &quot; ' ( ) ,]&gt;                                          }
  token reserved        { &lt;[= ; / # ? : ]&gt; || ' '                                    }
  token escape          { '%' &lt;[0..9 a..z A..Z]&gt; ** 2                                }
  token national        { &lt;[{ } | \[ \] \\ ^ ~]&gt;                                     }
  token punctuation     { &lt;[&lt; &gt;]&gt;                                                    }
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/kevin-colyer/perl6/ch-2.p6">Kevin Colyer</a> created a <code>URL</code> grammar to parse the input. Kevin also wrote a voluminous test suite. And he used an actions class with a <code>TOP</code> method to populate a hash with the various components of the URL.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/ozzy/perl6/ch-2.p6">Ozzy</a> used a quite concise grammar:</p>
<pre><code class="language-Perl6" data-lang="Perl6">grammar G {
    regex TOP { ^ &lt;scheme&gt; ':' ['//' &lt;authority&gt;]? &lt;path&gt; ['?' &lt;query&gt;]? ['#' &lt;fragment&gt;]? $ }
    token scheme    { &lt;+alpha-[_]&gt; &lt;[\w \+ \. \-]&gt;+          }
    token authority { [&lt;userinfo&gt; '@']? &lt;host&gt; [':' &lt;port&gt;]? }
    token userinfo  {  &lt;user&gt; [':' &lt;password&gt;]?              }
    token user      { \w+           }
    token password  { \w*           }
    token host      { &lt;[\w\.\[\]]&gt;+ }
    token port      { \d+           }
    token path      { [ '/' \w+ ]+  }
    token query     { &lt;[=\w]&gt;+      }
    token fragment  { \w+           }
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/feng-chang/perl6/ch-2.p6">Feng Chang</a> also created a <code>URL</code> grammar:</p>
<pre><code class="language-perl6" data-lang="perl6">grammar URL {
    token TOP { ^
        &lt;scheme&gt; ':'
        [ '//'
            [ &lt;userinfo&gt; '@' ]?
            &lt;host&gt;
            [ ':' &lt;port&gt; ]?
        ]?
        &lt;path&gt; [ '?' &lt;queries&gt; ]? [ '#' &lt;fragment&gt; ]?
    $ }
    token       scheme { &lt;id&gt; }
    token     userinfo { &lt;user&gt; [ ':' &lt;password&gt; ]? }
    token         user { &lt;id&gt; }
    token     password { \w+ }
    token         host { [ &lt;IPv4-address&gt; | &lt;domain-name&gt; ] }
    token IPv4-address { [\d ** 1..3] ** 4 % '.' }
    token        dname { &lt;[a..zA..Z]&gt; &lt;[-a..zA..Z0..9]&gt;* }
    token  domain-name { &lt;dname&gt;+ % '.' }
    token         port { \d+ }
    token         path { '/' [&lt;[a..zA..Z0..9]&gt;+] *%% '/' }
    token          key { &lt;id&gt; }
    token        value { \w+ }
    token        query { &lt;key&gt; '=' &lt;value&gt; }
    token      queries { &lt;query&gt; +% '&amp;' }
    token     fragment { &lt;id&gt; }
    token           id { &lt;[a..zA..Z]&gt; &lt;[-+.a..zA..Z0..9]&gt;* }
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/jaldhar-h-vyas/perl6/ch-2.p6">Jaldhar H. Vyas</a> also created a <code>URL</code> grammar:</p>
<pre><code class="language-Perl6" data-lang="Perl6">grammar URL {
    token TOP {
        &lt;Scheme&gt; ':'
        [
            '//'?
            [ &lt;Userinfo&gt; '@' ]?
            &lt;Host&gt;
            [ ':' &lt;Port&gt; ]?
        ]?
        &lt;Path&gt;?  '?' &lt;Query&gt; ]? [ '#' &lt;Fragment&gt; ]?
    }
    token Scheme { &lt;SchemeChar&gt;+ }
    token Userinfo { &lt;UserinfoChar&gt;+ }
    token Host { &lt;IPv4&gt; | &lt;Unreserved&gt;+ }
    token Port { \d+ }
    token Path { &lt;PathChar&gt;+ }
    token Query { &lt;QueryOrFragment&gt;+ }
    token Fragment { &lt;QueryOrFragment&gt;+ }
    token SchemeChar { &lt;[ A..Z a..z 0..9 + \- . ]&gt; }
    token DecOctet { \d | &lt;[1..9]&gt;\d | 1\d\d | 2&lt;[0..4]&gt;\d | 25&lt;[0..5]&gt; }
    token HexOctet { &lt;[ 0..9 A..F a..f ]&gt; ** 2 }
    token IPv4 { &lt;DecOctet&gt; \. &lt;DecOctet&gt; \. &lt;DecOctet&gt; \. &lt;DecOctet&gt; }
    token PChar { &lt;UserinfoChar&gt; | '@' }
    token PathChar { &lt;PChar&gt; | '/' }
    token PctEncoded { \% &lt;HexOctet&gt; }
    token QueryOrFragment { &lt;PChar&gt; | \/ | \? }
    token SubDelim { &lt;[ \! $ &amp; \' \( \) * \+ \, \; \= ]&gt; }
    token Unreserved { &lt;[ A..Z a..z 0..9 \- . _ \~ ]&gt; }
    token UserinfoChar { &lt;Unreserved&gt; | &lt;PctEncoded&gt; | &lt;SubDelim&gt; | ':' }
}
</code></pre><p>Jaldhar used an actions class with one method to display each of the URL components.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/joelle-maslak/perl6/ch-2.p6">Joelle Maslak</a> also defined a <code>URL</code> grammar. I like the way she used character class &ldquo;subtractions&rdquo; to define several of her tokens (for example <code>username</code>, <code>password</code>, etc.), leading to a fairly concise grammar:</p>
<pre><code class="language-Perl6" data-lang="Perl6">grammar URL {
    token TOP      {
        ^ &lt;scheme&gt; ':'
        [
            '//'
            [ &lt;userinfo&gt; '@' ]?
            &lt;host&gt;
            [ ':' &lt;port&gt; ]?
        ]?
        &lt;path&gt; [ '?' &lt;query&gt; ]? [ '#' &lt;fragment&gt; ]? $
    }
    token scheme   { &lt;[A .. Z a .. z ]&gt; &lt;[ A .. Z a .. z 0 .. 9 . + - ]&gt;* }
    token userinfo { &lt;username&gt; ':' &lt;password&gt; }
    token username { &lt;[ \S ] - [ : ]&gt;+ }
    token password { &lt;[ \S ] - [ @ ]&gt;* }
    token host     { &lt;[ \S ] - [ : ? / \# ]&gt;+ }
    token port     { &lt;[ \S ] - [ ? / \# ]&gt;+ }
    token path     { [ '/' &lt;[ \S ] - [ ? \# ]&gt;* ]? }
    token query    { &lt;[ \S ] - [ \# ]&gt;* }
    token fragment { \S* }
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/ruben-westerberg/perl6/ch-2.p6">Ruben Westerberg</a> defined a relatively compact <code>URI</code> grammar:</p>
<pre><code class="language-Perl6" data-lang="Perl6">grammar URI {
    token TOP {&lt;scheme&gt;\:&lt;authority&gt;?&lt;path&gt;[\?&lt;query&gt;]?[\#&lt;fragment&gt;]?};##|&lt;authority&gt;};
    token scheme { :i(&lt;alpha&gt;[&lt;[\-\.\+] + alnum&gt;]*)};
    token path { (\/[&lt;alnum&gt;\/?]*)+};
    token authority { (\/\/)[&lt;user&gt;[\:&lt;password&gt;]?\@]?&lt;host&gt;[\:&lt;port&gt;]?};
    token user { (&lt;alnum&gt;+)};
    token password { ( &lt;alnum&gt; +)};
    token host { (&lt;alnum&gt;+)};
    token port { (&lt;alnum&gt;+)};
    token query { &lt;qpair&gt;[\&amp;&lt;qpair&gt;]*};
    token qpair { (&lt;qkey&gt;\=&lt;qval&gt;)+};
    token qkey {&lt;alnum&gt;+};
    token qval {&lt;alnum&gt;+};
    token fragment { (&lt;alnum&gt;+)};
}
</code></pre><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/athanasius/perl6/ch-2.p6">Athanasius</a> took a very different path compared to other challengers and used a Perl 5 module from the CPAN: <code>URI::Split</code>. He otherwise used regexes for validating components presumably not properly checked by the module (scheme and authority).</p>
<h2 id="see-also">SEE ALSO</h2>
<p>Only two blogs this time:</p>
<p>Arne Sommer: <a href="https://perl6.eu/ackerman-url.html">https://perl6.eu/ackerman-url.html</a></p>
<p>Jaldar H. Vyas: <a href="https://www.braincells.com/perl/2019/07/perl_weekly_challenge_week_17.html">https://www.braincells.com/perl/2019/07/perl_weekly_challenge_week_17.html</a></p>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Please let me know if I forgot any of the challengers or if you think my explanation of your code misses something important.</p>
<p>If you want to participate to the Perl Weekly Challenge, please connect to <a href="https://perlweeklychallenge.org/">this site</a>.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        <script>document.write(new Date().getFullYear())</script>
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

