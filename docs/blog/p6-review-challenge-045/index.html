<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Ryan Thompson › Raku Weekly Review: Challenge - #045">
    <meta name="author" content="Perl Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.55.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ryan Thompson › Raku Weekly Review: Challenge - #045</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">
</head>

<body>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Ryan Thompson › Raku Weekly Review: Challenge - #045</h2>
                    <div class="portfolio-meta">
                        <span>Saturday, Feb 8, 2020</span>|
                        <span> Tags:
                            raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/p6-review-challenge-045.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    

<p>Welcome to the Raku review for Week 045 of the Weekly Challenge! For a quick overview, go through the <a href="/blog/perl-weekly-challenge-045/">original tasks</a> and <a href="/blog/recap-challenge-045/">recap</a> of the weekly challenge.</p>

<p>I&rsquo;m filling in for Laurent this week with the Raku review.</p>

<h2 id="getting-in-touch">Getting in Touch</h2>

<p><a href="mailto:rjt@cpan.org"><img src="http://ry.ca/misc/Email.svg" height="50" width="50"> Email</a> › Email me (Ryan) with any feedback about this review.</p>

<p><a href="https://github.com/manwar/perlweeklychallenge"><img src="http://ry.ca/misc/Github.svg" height="50" width="50"> GitHub</a> › Submit a pull request for any issues you may find with this page.</p>

<p><a href="https://twitter.com/perlwchallenge"><img src="http://ry.ca/misc/Twitter.svg" height="50" width="50"> Twitter</a> › Join the discussion on Twitter!</p>

<p>We&rsquo;d greatly appreciate any feedback you&rsquo;d like to give.</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
<li><a href="#task1">Task 1</a></li>
<li><a href="#task2">Task 2</a></li>
<li><a href="#blogs">Blogs</a></li>
</ul>

<hr />

<h1 id="task1">Task #1 › Square Secret Code</h1>

<hr />

<h2 id="original-task-description">Original task description</h2>

<p>The square secret code mechanism first removes any space from the original message. Then it lays down the message in a row of 8 columns. The coded message is then obtained by reading down the columns going left to right.</p>

<p>For example, the message is <strong>“The quick brown fox jumps over the lazy dog”.</strong></p>

<p>Then the message would be laid out as below:</p>

<pre><code>thequick
brownfox
jumpsove
rthelazy
dog
</code></pre>

<p><strong>Figure 1</strong> › Partitioned Plaintext</p>

<p>The code message would be as below:</p>

<pre><code>tbjrd hruto eomhg qwpe unsl ifoa covz kxey
</code></pre>

<hr />

<h2 id="my-general-observations">My general observations</h2>

<p>There were three key ways people approached this task:</p>

<h3 id="1-partitioning-and-looping">1. Partitioning and Looping</h3>

<p>By first splitting the plaintext into column-width substrings, you end up with <strong>Figure 1</strong> (above). From there, you can simply append the first character of each string to your output, then the second character, and so on.</p>

<p>This method is perhaps the most obvious implementation of the problem description, as it follows the wording quite closely.</p>

<h3 id="2-zip-z-or-roundrobin">2. <code>zip</code>, <code>[Z~]</code> or <code>roundrobin</code></h3>

<p>This method builds on the first by taking advantage of these Raku builtins. After partitioning the string into 8-character arrays, those arrays can be simply fed through any of <code>zip</code>, <code>[Z~]</code> or <code>roundrobin</code>, and then <code>join</code>ed together.</p>

<h3 id="3-comb-and-modulo-arithmetic">3. <code>.comb</code> and Modulo Arithmetic</h3>

<p>For this method, you first split the plaintext into a list of chars with <code>.comb</code>. Then, you loop over the plaintext array, appending each character into its <code>$index % $columns</code> string in an array of <code>@columns</code>. Finally, you simply <code>join</code> the columns together.</p>

<hr />

<p>If my plain English descriptions don&rsquo;t make complete sense yet, don&rsquo;t worry; there will be plenty of code examples below.</p>

<h2 id="arne-sommer">Arne Sommer</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/arne-sommer/raku/ch-1.p6">Arne Sommer&rsquo;s solution</a> removes spaces (and also removes double quotes) and then splits the input into a character array. Finally, he uses a nested loop to print the solution character by character:</p>

<pre><code class="language-raku">unit sub MAIN ($string is copy = &quot;The quick brown fox jumps over the lazy dog&quot;, :$verbose);
$string ~~ tr/&quot; &quot;//;
say &quot;: { $string.lc }&quot; if $verbose;
my @a = $string.lc.comb;

for 0 .. 7 -&gt; $word {
  my $index = $word;
  loop {
    @a[$index]:exists
      ?? print  @a[$index]
      !! ( print &quot; &quot;; last);

    $index += 8;
  }
}
say &quot;&quot;;
</code></pre>

<p>Arne&rsquo;s loops allow him to scan over <code>@a</code> 8 characters at a time, shifting the starting position from 0 to 7, so he scans each column.</p>

<p><strong>Blog</strong> › <a href="https://raku-musings.com/square-dumper.html">Square Dumper with Raku</a></p>

<h2 id="burkhard-nickels">Burkhard Nickels</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/burkhard-nickels/raku/ch-1.p6">Burkhard Nickels&rsquo; solution</a> uses a C-style <code>loop</code> to advance 8 characters at a time:</p>

<pre><code class="language-raku">$msg ~~ s:g/\s//;
$msg = $msg.lc;
my @l = split(&quot;&quot;,$msg);

my $coded_msg;
for (1 .. 8) {
    loop (my $j = $_; $j &lt;= @l.end; $j += 8) {
        $coded_msg ~= @l[ $j ];
    }
    $coded_msg ~= &quot; &quot;;
}
print &quot;Coded   : $coded_msg\n&quot;;
</code></pre>

<p><strong>Blog</strong> › <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/burkhard-nickels/perl/ch-1.pod">Square Secret Code</a></p>

<h2 id="colin-crain">Colin Crain</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/colin-crain/raku/ch-1.p6">Colin Crain&rsquo;s solution</a> is a first example we&rsquo;ll see of a <code>zip</code> or <code>roundrobin</code> solution:</p>

<pre><code class="language-raku">sub MAIN (Str:D $raw = &quot;The quick brown fox jumps over the lazy dog&quot; ) {
    my $input = $raw.comb.grep( /\w/ ).join( '' ).lc;
    my @output = roundrobin ($input.comb(8)).map({ .comb });
    say join ' ', @output.map({ .join });
}
</code></pre>

<p>Colin first strips all non-word characters and converts the input to lowercase.</p>

<p>He then uses <code>comb(8)</code> to split the strings into 8-character strings, and <code>.comb</code> on each of those to convert them to character arrays. And then it gets interesting:</p>

<p>The <a href="https://docs.perl6.org/routine/roundrobin">roundrobin</a> routine (which is similar to <a href="https://docs.perl6.org/type/List#routine_zip">zip</a>, except it handles lists of uneven lengths) takes the first character from each list, then the second, then the third, and so on. That&rsquo;s the exact ordering we need.</p>

<h2 id="jaldhar-h-vyas">Jaldhar H. Vyas</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/jaldhar-h-vyas/raku/ch-1.p6">Jaldhar H. Vyas&rsquo; solution</a> is another very compact one:</p>

<pre><code class="language-raku">multi sub MAIN(*@ARGS) {
    my $input = @*ARGS.lc.join(q{ }).subst(/\s+/, q{}, :g);
    $input ~= q{ } x 8 - ($input.chars % 8);
    ([Z~] $input.comb.rotor(8)).join(q{ }).subst(/' '+/, q{ }, :g).say;
}
</code></pre>

<p>The first line joins the arguments, converting them to lowercase removing spaces. The second line then pads the input string to be a multiple of 8 characters.</p>

<p>The third line first splits <code>$input</code> into a character array with <code>.comb</code>, and then uses <code>rotor(8)</code> for the array the same way Colin used <code>.comb(8)</code> for a string. Jaldhar then <code>.join</code>s them with spaces, and trims repeated spaces. The result of all of this is then fed through the reduction metaoperator <code>[Z~]</code> to do the zip operation.</p>

<p><strong>Blog</strong> › <a href="https://www.braincells.com/perl/2020/02/perl_weekly_challenge_week_45.html">Perl Weekly Challenge 045</a></p>

<h2 id="javier-luque">Javier Luque</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/javier-luque/raku/ch-1.p6">Javier Luque&rsquo;s solution</a> uses the <code>.comb</code> and modulo arithmetic approach to build up <code>@new_words</code> character by character:</p>

<pre><code class="language-raku">sub MAIN(Str $string) {
    my @new_words;
    @new_words[$_] = '' for (0..7);

    my $clean_string = $string;
    $clean_string ~~ s:g/\s//;
    my @chars = $clean_string.comb;

    for (0 .. @chars.elems - 1) -&gt; $i {
        @new_words[$i % 8] =
            @new_words[$i % 8] ~ @chars[$i];
    }

    say @new_words.join(' ');
}
</code></pre>

<p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/01/30/perl-weekly-challenge-045/">PERL WEEKLY CHALLENGE – 045 – Perl Weekly Challenge</a></p>

<h2 id="jan-ole-kraft">Jan Ole Kraft</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/jokraft/raku/ch-1.p6">Jan Ole Kraft&rsquo;s solution</a> splits the string into characters, and then uses a nested loop with indexing arithmetic to build up the output, character by character:</p>

<pre><code class="language-raku">$str = $str.subst(&quot; &quot;,&quot;&quot;,:g);
my @arr = $str.split(&quot;&quot;, :skip-empty);
my $out = &quot;&quot;;
for (0..7) -&gt; $i {
  my $c = 0;
  while $c * 8 + $i &lt; @arr.elems {
    $out = $out ~ @arr[$i + $c*8];
    $c++;
  }
  $out = $out ~ &quot; &quot;;
}
say $out;
</code></pre>

<h2 id="laurent-rosenfeld">Laurent Rosenfeld</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/laurent-rosenfeld/raku/ch-1.p6">Laurent Rosenfeld&rsquo;s solution</a> chunks the input into 8-character strings, and then loops over each column. Laurent prints each <code>join</code>ed segment together, built up from the <code>$i</code>th character of each 8-character string via <code>substr</code>:</p>

<pre><code class="language-raku">my $msg = @*ARGS ?? shift @*ARGS
    !! &quot;The quick brown fox jumps over the lazy dog&quot;;
$msg ~~ s:g/\s+//;
my @letters = map { ~ $_}, $msg ~~ m:g/ .**1..8/;
for 0..7 -&gt; $i {
    print &quot; &quot;, join &quot;&quot;, map { substr  $_, $i, 1 if .chars &gt;= $i}, @letters;
}
</code></pre>

<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-45-square-secret-code-and-source-dumper.html">Perl Weekly Challenge 45: Square Secret Code and Source Dumper</a></p>

<h2 id="luca-ferrari">Luca Ferrari</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/luca-ferrari/raku/ch-1.p6">Luca Ferrari&rsquo;s solution</a> is another that uses <code>rotor</code> to chunk the filtered input into <code>$columns</code>-character arrays:</p>

<pre><code class="language-raku">my @matrix = $message.lc.comb( /\w/ ).rotor: $columns, :partial;

say &quot;Your original message is \n\t$message\n and encoded results:\n&quot;;
@matrix.join( &quot;\n&quot; ).say;
say &quot;\nthat leads to\n&quot;;
for 0 .. $columns -&gt; $start {
    ( @matrix[ $_ ][ $start ] // '' ).print for 0 .. @matrix.elems;
}
</code></pre>

<p>Luca&rsquo;s nested loop takes care of the indexing into both arrays to print out the solution in the correct order.</p>

<p><strong>Blog</strong> › <a href="https://fluca1978.github.io/2020/01/29/PerlWeeklyChallenge45.html">Perl Weekly Challenge 45: encoded messages and self-source-code-printing</a></p>

<h2 id="mark-anderson">Mark Anderson</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/mark-anderson/raku/ch-1.p6">Mark Anderson&rsquo;s solution</a> uses the <code>zip</code> method to elegant effect:</p>

<pre><code class="language-raku">my @array.push: [.split({}, :skip-empty)] for $string.comb(8);
@array[*-1].push: &quot; &quot; for @array[*-1].elems..7;
@array = [Z] @array;
$_ = .join.trim-trailing for @array;
say @array.join: &quot; &quot;;
</code></pre>

<p>Once the <code>@array</code> has been put through <code>[Z]</code>, each of the sub-arrays may contain trailing spaces if the input wasn&rsquo;t a multiple of 8 characters in length, so Mark uses <code>.trim-trailing</code> in-place to clean those up, before printing the result.</p>

<h2 id="markus-holzer">Markus Holzer</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/markus-holzer/raku/ch-1.p6">Markus Holzer&rsquo;s solution</a> is another good example of the <code>zip</code> or <code>roundrobin</code> method:</p>

<pre><code class="language-raku">sub encrypt-squarely( $message ) {
    roundrobin(
      $message
      .subst(' ', '', :g)
      .lc
      .comb(/ . **! {1..8} /)
      .map({ .split('', :skip-empty) })
    )
    .map({ .join })
}
</code></pre>

<p>As you can see, after removing spaces and converting to lowercase, <code>$message</code> is partitioned with <code>.comb</code> using a regex. It&rsquo;s then split into characters before <code>roundrobin</code> can do its magic.</p>

<h2 id="noud-aldenhoven">Noud Aldenhoven</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/noud/raku/ch-1.p6">Noud Aldenhoven&rsquo;s solution</a> once again uses <code>[Z~]</code> to make short work of this problem:</p>

<pre><code class="language-raku">sub encode($str) {
    my $stripped = $str.lc.subst(/\s/, '', :g);
    my @r = ($stripped ~ &quot; &quot; x (8 - $stripped.chars % 8)).comb.rotor(8, :partial);
    return ([Z~] @r).map({ $_.trim }).join(' ');
}
</code></pre>

<h2 id="roger-bell-west">Roger Bell West</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/roger-bell-west/raku/ch-1.p6">Roger Bell West&rsquo;s solution</a> first joins the input into <code>$in</code>:</p>

<pre><code class="language-raku">my $n=8;
my $in='';
for lines() {
  .chomp;
  my $t=$_;
  $t ~~ s:g/\s+//;
  $in~=$t;
}
</code></pre>

<p>From there, Roger&rsquo;s nested loop advances <code>$n = 8</code> characters at a time, from all 8 starting positions, to build up the output one character at a time:</p>

<pre><code class="language-raku">my $l=chars($in)-1;
my @out;
for (0..$n-1) -&gt; $c {
  my $out;
  my $k=$c;
  while ($k &lt;= $l) {
    $out~=substr($in,$k,1);
    $k+=$n;
  }
  push @out,$out;
}

say @out.join(' ');
</code></pre>

<h2 id="ruben-westerberg">Ruben Westerberg</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/ruben-westerberg/raku/ch-1.p6">Ruben Westerberg&rsquo;s solution</a> is a beautiful example of the <code>[Z~]</code> method:</p>

<pre><code class="language-raku">my $string=&quot;The quick brown fox jumps over the lazy dog&quot;;
my $padded=$string.trans(&quot; &quot;=&gt;&quot;&quot;);
my $a=$padded.comb.rotor: 8;
put ([Z~] $a).join: &quot; &quot;;
</code></pre>

<p>While we&rsquo;re all sometimes tempted to chain together as many things as possible, Ruben&rsquo;s code is an excellent case study on why it&rsquo;s sometimes better to split those long chains into separate statements.</p>

<h2 id="ryan-thompson">Ryan Thompson</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/ryan-thompson/raku/ch-1.p6">My solution</a> uses the <code>.comb</code> and modulo arithmetic approach:</p>

<pre><code class="language-raku">my @s;
$plain.lc.subst(/\s/,'',:g).comb.kv.map: { @s[$^i % $width] ~= $^str };
@s.join(' ')
</code></pre>

<p>I used <code>.kv</code> so I could conveniently access both the character and its index.</p>

<p><strong>Blog</strong> › <a href="http://www.ry.ca/2020/01/square-secret-code/">Square Secret Code</a></p>

<h2 id="simon-proctor">Simon Proctor</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/simon-proctor/raku/ch-1.p6">Simon Proctor&rsquo;s solution</a> gives us an encoder and decoder using <code>roundrobin</code>, and packages this up in two <code>multi</code> main subs. Here&rsquo;s the encoder:</p>

<pre><code class="language-raku">#| Given a string encoded it using the square code
multi sub MAIN(
    *@clear-text #= Phrase to encode
) {
    roundrobin( @clear-text.map(*.lc.comb).flat.rotor( 8, :partial ) ).map(*.join(&quot;&quot;)).join(&quot; &quot;).say;
}
</code></pre>

<p>And here is the decoder:</p>

<pre><code class="language-raku">#| Given a square encoded string decode it
multi sub MAIN(
    Bool :d(:$decode)!, #= Turn on decode mode
    *@encoded #= Encoded phrase
) {
    roundrobin( @encoded.map(*.comb(&quot;&quot;)) ).flat.join(&quot;&quot;).say;
}
</code></pre>

<p>This is the first example of a decoder we&rsquo;ve seen in Raku, and I&rsquo;m impressed by how simple it turns out to be for Simon.</p>

<h2 id="ulrich-rieke">Ulrich Rieke</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/ulrich-rieke/raku/ch-1.p6">Ulrich Rieke&rsquo;s solution</a> partitions the string using <code>.rotor</code>, and then uses <code>substr</code> in a nested loop to build up <code>$encoded</code> character by character:</p>

<pre><code class="language-raku">sub convertString( Str $str is copy ) {
    $str ~~ s:g/\s+// ;
    my @strings = $str.comb.rotor( 8, :partial).map( {.join} ).Array ;
    my $encoded ;
    for (0..7) -&gt; $i {
        for @strings -&gt; $word {
            my $len = $word.chars ;
            $encoded ~= $word.substr( $i , 1 ) if $len &gt; $i ;
        }
    }
    my $len = @strings.elems ;
</code></pre>

<p>At this point, we have the characters in the right order, but each column needs to now be separated by spaces:</p>

<pre><code class="language-raku">    my $lastwordlen = @strings[$len - 1].chars ;
    my @cycle ;
    for (1..$lastwordlen) {
        @cycle.push( $len ) ;
    }
    for ( 1..8 - $lastwordlen) {
        @cycle.push( $len - 1 ) ;
    }
    return $encoded.comb.rotor( @cycle ).map( {.join} ).Array ;
}
</code></pre>

<p>Ulrich accomplishes this by building up an array <code>@cycle</code> to contain the length of the string in each column. He is then able to pass that to <code>rotor</code> to split <code>$encoded</code> at the correct intervals.</p>

<hr />

<h1 id="task2">Task #2 - Source Dumper</h1>

<p>Write a script that dumps its own source code. For example, say, the script name is <code>ch-2.p6</code>. The following command should return nothing:</p>

<pre><code class="language-sh">$ perl6 ch-2.p6 | diff - ch-2.p6
</code></pre>

<hr />

<h2 id="my-observations">My observations</h2>

<p>There are two ways to interpret this problem, resulting in very different solutions.</p>

<h3 id="1-source-code-reader">1. Source Code Reader</h3>

<p>A straight reading of the challenge, with no additional constraints, means our script can simply read its own source file and print it. For example, here is my first solution:</p>

<pre><code class="language-raku">$*PROGRAM.lines».say
</code></pre>

<p>Literally everyone implemented something similar.</p>

<h3 id="2-quine">2. Quine</h3>

<p>However, one of the hackers this week has the perhaps dubious distinction of taking the task a step further, being the only Raku hacker this week to produce a full <a href="https://en.wikipedia.org/wiki/Quine_(computing)">quine</a>. That hacker is also the one writing this review.</p>

<p>For the uninitiated, quines are computer programs that not only produce a copy of their own source code, but they also have the additional constraint of <em>taking no input,</em> meaning, reading your own source code is not allowed.</p>

<p>Several of the Perl solutions this week were quines, so if you&rsquo;d like to see more examples, check out my <a href="/blog/review-challenge-045#task2">Perl review</a> for a showcase.</p>

<h2 id="arne-sommer-1">Arne Sommer</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/arne-sommer/raku/ch-2.p6">Arne Sommer&rsquo;s solution</a> uses the compile-time <code>$?FILE</code> variable to get the script name, then converts it to an IO object, and <code>.slurp</code>s its contents:</p>

<pre><code class="language-raku">print $?FILE.IO.slurp;
</code></pre>

<p><strong>Blog</strong> › <a href="https://raku-musings.com/square-dumper.html">Square Dumper with Raku</a></p>

<h2 id="burkhard-nickels-1">Burkhard Nickels</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/burkhard-nickels/raku/ch-2.p6">Burkhard Nickels&rsquo;s solution</a> is not quite as feature-packed as <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/burkhard-nickels/perl/ch-2.pl">his Perl version</a>, but Chuck still produces a complete program:</p>

<pre><code class="language-raku"># print &quot;ch-2.p6 - PWC #45 Task #2: Source Dumper\n&quot;;
# print $*PROGRAM, &quot;, &quot;, $*PROGRAM-NAME, &quot;\n&quot;;

my $fh = open :r, $*PROGRAM;

my $str;
while ( ! $fh.eof; ) {
    $str = $fh.get;
    $str.print; print &quot;\n&quot;;
}
$fh.close;
</code></pre>

<p>Chuck uses <code>$*PROGRAM</code> to get the <code>IO::Path</code> object of the program.</p>

<p><strong>Blog</strong> › <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/burkhard-nickels/perl/ch-2.pod">Source Dumper</a></p>

<h2 id="colin-crain-1">Colin Crain</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/colin-crain/raku/ch-2.p6">Colin Crain&rsquo;s solution</a> again uses <code>$*PROGRAM</code>, but avoids the loop by reading the contents into a string with <code>slurp</code>:</p>

<pre><code class="language-raku">sub MAIN () {
    print $*PROGRAM.open.slurp.gist;
}
</code></pre>

<h2 id="jaldhar-h-vyas-1">Jaldhar H. Vyas</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/jaldhar-h-vyas/raku/ch-2.p6">Jaldhar H. Vyas&rsquo; solution</a> is another slurpy one:</p>

<pre><code class="language-raku">open(:r, $*PROGRAM).slurp.print;
</code></pre>

<p><strong>Blog</strong> › <a href="https://www.braincells.com/perl/2020/02/perl_weekly_challenge_week_45.html">Perl Weekly Challenge Week 45</a></p>

<h2 id="javier-luque-1">Javier Luque</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/javier-luque/raku/ch-2.p6">Javier Luque&rsquo;s solution</a> instead uses <code>$*PROGRAM-NAME.IO</code> to get the IO object needed to print the lines:</p>

<pre><code class="language-raku">sub MAIN () {
    for $*PROGRAM-NAME.IO.lines -&gt; $line {
        say $line;
    }
}
</code></pre>

<p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/01/30/perl-weekly-challenge-045/">PERL WEEKLY CHALLENGE – 045 – Perl Weekly Challenge</a></p>

<h2 id="jan-ole-kraft-1">Jan Ole Kraft</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/jokraft/raku/ch-2.p6">Jan Ole Kraft&rsquo;s solution</a> is another example of using the compile-time variable <code>$?FILE</code>. Instead of using <code>.IO</code>, the more explicit <code>.open</code> is used. After that, <code>readchars</code> reads up to 64KiB characters, and <code>prints</code> those:</p>

<pre><code class="language-raku">IO::Path.new($?FILE).open().readchars().print();
</code></pre>

<p>The 64KiB number comes from <code>$*DEFAULT-READ-ELEMS</code>, which is 65536 on my version, but <a href="https://docs.perl6.org/routine/readchars">the documentation</a> notes it is implementation-specific, so, if in doubt, supply your own value or read in a loop to avoid surprises.</p>

<h2 id="laurent-rosenfeld-1">Laurent Rosenfeld</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/laurent-rosenfeld/raku/ch-2.p6">Laurent Rosenfeld&rsquo;s solution</a> pulls the filename from <code>$?FILE</code> uses the <code>IO</code> role of Str to enable <code>slurp</code>ing its contents:</p>

<pre><code class="language-raku">$?FILE.IO.slurp.say;
</code></pre>

<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-45-square-secret-code-and-source-dumper.html">Perl Weekly Challenge 45: Square Secret Code and Source Dumper</a></p>

<h2 id="luca-ferrari-1">Luca Ferrari</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/luca-ferrari/raku/ch-2.p6">Luca Ferrari&rsquo;s solution</a> uses the ready-made <code>$*PROGRAM</code> IO object to <code>say</code> each line:</p>

<pre><code class="language-raku">sub MAIN {
    .say for $*PROGRAM.lines;
}
</code></pre>

<p><strong>Blog</strong> › <a href="https://fluca1978.github.io/2020/01/29/PerlWeeklyChallenge45.html">Perl Weekly Challenge 45: encoded messages and self-source-code-printing</a></p>

<h2 id="markus-holzer-1">Markus Holzer</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/markus-holzer/raku/ch-2.p6">Markus Holzer&rsquo;s solution</a> goes with <code>$*PROGRAM-NAME</code>, but the effect is the same as using <code>$?FILE</code>:</p>

<pre><code class="language-raku">$*PROGRAM-NAME.IO.slurp.say;
</code></pre>

<h2 id="noud-aldenhoven-1">Noud Aldenhoven</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/noud/raku/ch-2.p6">Noud Aldenhoven&rsquo;s solution</a> is another <code>$?FILE</code> solution:</p>

<pre><code class="language-raku">$?FILE.IO.slurp.trim.say;
</code></pre>

<h2 id="roger-bell-west-1">Roger Bell West</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/roger-bell-west/raku/ch-2.p6">Roger Bell West&rsquo;s solution</a> uses the more explicit <code>open</code> symtax:</p>

<pre><code class="language-raku">my $f=open :r,$*PROGRAM-NAME;
for $f.lines {
  say $_;
}
</code></pre>

<h2 id="ruben-westerberg-1">Ruben Westerberg</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/ruben-westerberg/raku/ch-2.p6">Ruben Westerberg&rsquo;s solution</a> uses <code>$*PROGRAM</code>:</p>

<pre><code class="language-raku">$*PROGRAM.IO.lines.map: *.put;
</code></pre>

<h2 id="ryan-thompson-1">Ryan Thompson</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/ryan-thompson/raku/ch-2.p6">My file read solution</a> uses <code>$*PROGRAM</code>, and a hyper operator to call <code>.say</code> on each line:</p>

<pre><code class="language-raku">$*PROGRAM.lines».say
</code></pre>

<p>However, I also submitted a <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/ryan-thompson/raku/ch-2a.p6">full quine</a>:</p>

<pre><code class="language-raku">{.printf($_)}(&lt;{.printf($_)}(&lt;%s&gt;)&gt;)
</code></pre>

<p>You can see that the <code>&lt;&gt;</code> quote contains a copy of the program, and the <code>printf</code> will duly expand the <code>%s</code>, so the output is the full program source, and passes the <code>diff</code> test as well.</p>

<p><strong>Blog</strong> › <a href="http://www.ry.ca/2020/02/quine/">Quine</a></p>

<h2 id="simon-proctor-1">Simon Proctor</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/simon-proctor/raku/ch-2.p6">Simon Proctor&rsquo;s solution</a> <code>slurps</code> right from <code>$*PROGRAM</code>:</p>

<pre><code class="language-raku">$*PROGRAM.slurp.print;
</code></pre>

<h2 id="ulrich-rieke-1">Ulrich Rieke</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/ulrich-rieke/raku/ch-2.p6">Ulrich Rieke&rsquo;s solution</a> is another example of a more explicit approach with <code>open</code>:</p>

<pre><code class="language-raku">my $fh = open $?FILE , :r ;
.say for $fh.lines ;
close $fh ;
</code></pre>

<hr />

<hr />

<h2 id="blogs">SEE ALSO</h2>

<hr />

<h3 id="blogs-this-week">Blogs this week:</h3>

<p><strong>Adam Russell</strong> › <a href="https://adamcrussell.livejournal.com/15213.html">Perl Fun</a></p>

<p><strong>Arne Sommer</strong> › <a href="https://raku-musings.com/square-dumper.html">Square Dumper with Raku</a></p>

<p><strong>Burkhard Nickels</strong> › <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/burkhard-nickels/perl/ch-1.pod">Square Secret Code</a> | <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-045/burkhard-nickels/perl/ch-2.pod">Source Dumper</a></p>

<p><strong>Dave Jacoby</strong> › <a href="https://jacoby.github.io/2020/01/29/challenge-45-cyphers-and-quines.html">Challenge 45: Cyphers and Quines</a></p>

<p><strong>E. Choroba</strong> › <a href="http://blogs.perl.org/users/e_choroba/2020/01/perl-weekly-challenge-045-square-secret-code-source-dumper.html">Square Secret Code &amp; Source Dumper</a></p>

<p><strong>Jaldhar H. Vyas</strong> › <a href="https://www.braincells.com/perl/2020/02/perl_weekly_challenge_week_45.html">Perl Weekly Challenge 45</a></p>

<p><strong>Javier Luque</strong> › <a href="https://perlchallenges.wordpress.com/2020/01/30/perl-weekly-challenge-045/">Perl Weekly Challenge</a></p>

<p><strong>Luca Ferrari</strong> › <a href="https://fluca1978.github.io/2020/01/29/PerlWeeklyChallenge45.html">encoded messages and self-source-code-printing</a></p>

<p><strong>Laurent Rosenfeld</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-45-square-secret-code-and-source-dumper.html">Square Secret Code and Source Dumper</a></p>

<p><strong>Ryan Thompson</strong> › <a href="http://www.ry.ca/2020/01/square-secret-code/">Square Secret Code</a> | <a href="http://www.ry.ca/2020/02/quine/">Quine</a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        <script>document.write(new Date().getFullYear())</script>
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

